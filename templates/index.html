<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ChineseGeorgian • AI Converter</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary: #48a868;
        --primary-dark: #3e8c5a;
        --secondary: #1a1a2e;
        --accent: #52b869;
        --success: #52b869;
        --warning: #f0ad4e;
        --error: #d9534f;

        --bg-primary: #0a0a0a;
        --bg-secondary: #151515;
        --bg-tertiary: #202020;
        --bg-glass: rgba(255, 255, 255, 0.05);
        --bg-glass-hover: rgba(255, 255, 255, 0.08);

        --text-primary: #ffffff;
        --text-secondary: #d0d0d0;
        --text-muted: #a0a0a0;

        --border: rgba(255, 255, 255, 0.12);
        --border-hover: rgba(72, 168, 104, 0.25);

        --shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3),
          0 10px 10px -5px rgba(0, 0, 0, 0.1);
        --shadow-lg: 0 25px 50px -12px rgba(0, 0, 0, 0.4);

        --blur: blur(20px);
        --radius: 12px;
        --radius-lg: 16px;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, sans-serif;
        background: linear-gradient(
          135deg,
          #0a0a0a 0%,
          #1a1a2e 50%,
          #0a0a0a 100%
        );
        min-height: 100vh;
        color: var(--text-primary);
        overflow-x: hidden;
        position: relative;
      }

      body::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: radial-gradient(
            circle at 20% 50%,
            rgba(72, 168, 104, 0.06) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 80% 20%,
            rgba(82, 184, 105, 0.03) 0%,
            transparent 50%
          ),
          radial-gradient(
            circle at 40% 80%,
            rgba(72, 168, 104, 0.04) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: -1;
        animation: subtleShift 20s ease-in-out infinite;
      }

      @keyframes subtleShift {
        0%,
        100% {
          transform: translate(0, 0) scale(1);
          opacity: 1;
        }
        50% {
          transform: translate(-5px, -3px) scale(1.02);
          opacity: 0.95;
        }
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        padding: 40px 24px;
        min-height: 100vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        position: relative;
      }

      .app-card {
        background: var(--bg-glass);
        backdrop-filter: var(--blur);
        border: 1px solid var(--border);
        border-radius: var(--radius-lg);
        padding: 48px;
        box-shadow: var(--shadow-lg);
        position: relative;
        overflow: hidden;
        animation: slideUp 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 48px;
        align-items: start;
      }

      .app-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 1px;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(72, 168, 104, 0.15),
          transparent
        );
        animation: gentleGlow 4s ease-in-out infinite;
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px) scale(0.98);
        }
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      @keyframes gentleGlow {
        0%,
        100% {
          opacity: 0.3;
        }
        50% {
          opacity: 0.6;
        }
      }

      .left-panel {
        display: flex;
        flex-direction: column;
        min-width: 0;
      }

      .right-panel {
        display: flex;
        flex-direction: column;
        position: sticky;
        top: 20px;
        min-width: 0;
      }

      .header {
        text-align: center;
        margin-bottom: 40px;
        grid-column: 1 / -1;
        animation: fadeIn 1s ease-out 0.3s both;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .title {
        font-size: clamp(2rem, 5vw, 2.8rem);
        font-weight: 700;
        background: linear-gradient(
          135deg,
          #ffffff 0%,
          #48a868 50%,
          #52b869 100%
        );
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        margin-bottom: 16px;
        line-height: 1.2;
      }

      .mode-section {
        margin-bottom: 24px;
        animation: slideInLeft 0.6s ease-out 0.4s both;
      }

      @keyframes slideInLeft {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .mode-toggle {
        display: flex;
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 4px;
        margin-bottom: 20px;
      }

      .mode-option {
        flex: 1;
        padding: 12px 20px;
        background: transparent;
        border: none;
        color: var(--text-secondary);
        font-weight: 600;
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: calc(var(--radius) - 4px);
        font-family: inherit;
        position: relative;
        overflow: hidden;
      }

      .mode-option::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(72, 168, 104, 0.1),
          transparent
        );
        transition: left 0.6s ease;
      }

      .mode-option:hover::before {
        left: 100%;
      }

      .mode-option.active {
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: #ffffff;
        font-weight: 700;
        box-shadow: 0 2px 8px rgba(72, 168, 104, 0.2);
        transform: translateY(-1px);
      }

      .mode-option:hover:not(.active) {
        color: var(--text-primary);
        background: rgba(255, 255, 255, 0.05);
        transform: translateY(-1px);
      }

      .input-section {
        margin-bottom: 32px;
        animation: slideInLeft 0.6s ease-out 0.5s both;
      }

      .input-label {
        display: block;
        font-size: 0.875rem;
        font-weight: 700;
        color: var(--text-primary);
        margin-bottom: 12px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .input-wrapper {
        position: relative;
        margin-bottom: 16px;
      }

      .input-field {
        width: 100%;
        padding: 20px 24px;
        font-size: 1.125rem;
        background: rgba(0, 0, 0, 0.3);
        backdrop-filter: var(--blur);
        border: 2px solid var(--border);
        border-radius: var(--radius);
        color: var(--text-primary);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        outline: none;
        font-family: inherit;
        font-weight: 500;
        min-height: 80px;
        resize: vertical;
      }

      .input-field::placeholder {
        color: var(--text-muted);
        font-weight: 400;
      }

      .input-field:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(72, 168, 104, 0.12),
          0 0 15px rgba(72, 168, 104, 0.06);
        transform: translateY(-2px);
        background: rgba(0, 0, 0, 0.4);
      }

      .input-icon {
        position: absolute;
        right: 20px;
        top: 20px;
        color: var(--text-secondary);
        font-size: 1.25rem;
        transition: all 0.4s ease;
        pointer-events: none;
      }

      .input-field:focus + .input-icon {
        color: var(--primary);
        transform: scale(1.1) rotate(5deg);
      }

      .help-text {
        font-size: 0.875rem;
        color: var(--text-secondary);
        line-height: 1.5;
        font-weight: 500;
      }

      .convert-btn {
        width: 100%;
        padding: 20px;
        font-size: 1.125rem;
        font-weight: 700;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: #ffffff;
        border: none;
        border-radius: var(--radius);
        cursor: pointer;
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        overflow: hidden;
        margin-bottom: 32px;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        box-shadow: 0 4px 12px rgba(72, 168, 104, 0.2);
        animation: slideInLeft 0.6s ease-out 0.6s both;
      }

      .convert-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(72, 168, 104, 0.25);
      }

      .convert-btn:active {
        transform: translateY(0);
      }

      .convert-btn::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.15),
          transparent
        );
        transition: left 0.6s ease;
      }

      .convert-btn:hover::before {
        left: 100%;
      }

      .loading {
        display: none;
        text-align: center;
        margin: 24px 0;
      }

      .loading.show {
        display: block;
        animation: fadeIn 0.4s ease;
      }

      .spinner {
        width: 40px;
        height: 40px;
        margin: 0 auto 16px;
        border: 3px solid rgba(72, 168, 104, 0.15);
        border-top: 3px solid var(--primary);
        border-radius: 50%;
        animation: gentleSpin 1.2s linear infinite;
      }

      @keyframes gentleSpin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      .loading-text {
        color: var(--text-primary);
        font-size: 0.875rem;
        font-weight: 600;
      }

      .result-section {
        background: rgba(0, 0, 0, 0.2);
        backdrop-filter: var(--blur);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 32px;
        min-height: 350px;
        transition: all 0.4s ease;
        height: fit-content;
        animation: slideInRight 0.6s ease-out 0.5s both;
      }

      @keyframes slideInRight {
        from {
          opacity: 0;
          transform: translateX(20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .result-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 24px;
        font-size: 1.25rem;
        font-weight: 700;
        color: var(--text-primary);
      }

      .result-icon {
        width: 32px;
        height: 32px;
        background: linear-gradient(
          135deg,
          var(--primary) 0%,
          var(--accent) 100%
        );
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: #ffffff;
        font-size: 16px;
        font-weight: 700;
        animation: pulse 2s ease-in-out infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .result-content {
        min-height: 150px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .result-item {
        background: rgba(0, 0, 0, 0.3);
        border: 1px solid var(--border);
        border-radius: var(--radius);
        padding: 24px;
        margin-bottom: 16px;
        position: relative;
        overflow: hidden;
        animation: resultSlide 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        transition: all 0.4s ease;
      }

      .result-item:hover {
        transform: translateY(-2px);
        border-color: var(--border-hover);
        box-shadow: 0 6px 18px rgba(72, 168, 104, 0.08);
        background: rgba(0, 0, 0, 0.4);
      }

      .result-item:last-child {
        margin-bottom: 0;
      }

      @keyframes resultSlide {
        from {
          opacity: 0;
          transform: translateY(15px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .result-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 12px;
      }

      .result-row:last-child {
        margin-bottom: 0;
      }

      .result-label {
        font-size: 0.875rem;
        font-weight: 700;
        color: var(--primary);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .result-value {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-primary);
        text-align: right;
        flex: 1;
        margin-left: 16px;
        word-break: break-word;
      }

      .empty-state {
        text-align: center;
        color: var(--text-secondary);
        font-size: 0.875rem;
        line-height: 1.6;
        font-weight: 500;
      }

      .empty-icon {
        font-size: 2.5rem;
        margin-bottom: 12px;
        opacity: 0.6;
        color: var(--text-secondary);
        animation: breathe 3s ease-in-out infinite;
      }

      @keyframes breathe {
        0%,
        100% {
          opacity: 0.6;
        }
        50% {
          opacity: 0.8;
        }
      }

      .error-message {
        color: var(--error);
        background: rgba(217, 83, 79, 0.1);
        border: 1px solid rgba(217, 83, 79, 0.3);
        border-radius: var(--radius);
        padding: 16px;
        font-size: 0.875rem;
        line-height: 1.5;
        font-weight: 500;
      }

      @media (max-width: 768px) {
        .container {
          padding: 24px 16px;
        }

        .app-card {
          padding: 32px 24px;
          grid-template-columns: 1fr;
          gap: 32px;
        }

        .right-panel {
          position: relative;
          top: auto;
        }

        .theme-toggle {
          top: 16px;
          right: 16px;
          width: 48px;
          height: 48px;
          font-size: 18px;
        }

        .title {
          font-size: 2rem;
        }

        .input-field {
          padding: 16px 20px;
          font-size: 1rem;
        }

        .convert-btn {
          padding: 16px;
          font-size: 1rem;
        }

        .result-section {
          padding: 24px;
          min-height: 200px;
        }

        .result-item {
          padding: 20px;
        }

        .result-row {
          flex-direction: column;
          align-items: flex-start;
          gap: 8px;
        }

        .result-value {
          text-align: left;
          margin-left: 0;
        }
      }

      /* Accessibility improvements */
      @media (prefers-reduced-motion: reduce) {
        *,
        *::before,
        *::after {
          animation-duration: 0.01ms !important;
          animation-iteration-count: 1 !important;
          transition-duration: 0.01ms !important;
        }
      }

      /* High contrast mode */
      @media (prefers-contrast: high) {
        :root {
          --border: rgba(255, 255, 255, 0.3);
          --border-hover: rgba(255, 255, 255, 0.5);
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="app-card">
        <div class="header">
          <h1 class="title">ჩინურ-ქართული კონვერტორი</h1>
        </div>

        <div class="left-panel">
          <div class="mode-section">
            <div class="mode-toggle">
              <button class="mode-option" onclick="toggleMode('chinese')">
                Chinese
              </button>
              <button class="mode-option" onclick="toggleMode('pinyin')">
                Pinyin
              </button>
            </div>
          </div>

          <div class="input-section">
            <label for="textInput" class="input-label" id="inputLabel"
              >ტექსტი / Input Text</label
            >
            <div class="input-wrapper">
              <input
                type="text"
                class="input-field"
                id="textInput"
                placeholder="შეიყვანეთ ჩინური იეროგლიფები (北京) ან ფინინი (beijing)"
                onkeypress="handleKeyPress(event)"
                autocomplete="off"
                spellcheck="false"
              />
              <i class="fas fa-language input-icon"></i>
            </div>
            <div class="help-text" id="helpText">
              <i class="fas fa-info-circle"></i>
              შეიყვანეთ ჩინური იეროგლიფები ან პინინი.
            </div>
          </div>

          <button class="convert-btn" onclick="convert()" id="convertBtn">
            <i class="fas fa-magic"></i>
            კონვერტაცია / Convert
          </button>

          <div class="loading" id="loading">
            <div class="spinner"></div>
            <div class="loading-text">Processing with AI...</div>
          </div>
        </div>

        <div class="right-panel">
          <div class="result-section">
            <div class="result-header">
              <div class="result-icon">
                <i class="fas fa-sparkles"></i>
              </div>
              შედეგი / Result
            </div>
            <div class="result-content" id="resultContent">
              <div class="empty-state">
                <div class="empty-icon">
                  <i class="fas fa-arrow-left"></i>
                </div>
                Enter text on the left to see the Georgian translation
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      let currentMode = "chinese";

      function toggleMode(mode) {
        currentMode = mode;
        const modeButtons = document.querySelectorAll(".mode-option");
        const textInput = document.getElementById("textInput");
        const inputLabel = document.getElementById("inputLabel");
        const helpText = document.getElementById("helpText");

        // Update button states
        modeButtons.forEach((btn) => btn.classList.remove("active"));
        document
          .querySelector(`[onclick="toggleMode('${mode}')"]`)
          .classList.add("active");

        // Update placeholders and help text based on mode
        if (mode === "chinese") {
          textInput.placeholder =
            "შეიყვანეთ ჩინური იეროგლიფები (北京, 上海, 王)";
          inputLabel.textContent = "ჩინური / Chinese Input";
          helpText.innerHTML =
            '<i class="fas fa-info-circle"></i> შეიყვანეთ ჩინური იეროგლიფები. მაგ: 北京, 上海, 王';
        } else {
          textInput.placeholder = "შეიყვანეთ პინინი (beijing, shanghai, wang)";
          inputLabel.textContent = "პინინი / Pinyin Input";
          helpText.innerHTML =
            '<i class="fas fa-info-circle"></i> შეიყვანეთ პინინი ლათინური ასოებით. მაგ: beijing, zhang wei';
        }

        // Clear previous results with appropriate arrow direction
        const isMobile = window.innerWidth <= 768;
        const arrowIcon = isMobile ? "fa-arrow-up" : "fa-arrow-left";
        const directionText = isMobile ? "above" : "on the left";

        document.getElementById("resultContent").innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">
              <i class="fas ${arrowIcon}"></i>
            </div>
            Enter ${mode} text ${directionText} to see the Georgian translation
          </div>
        `;

        // Focus input
        textInput.focus();
      }

      function handleKeyPress(event) {
        if (event.key === "Enter") {
          convert();
        }
      }

      function convert() {
        const text = document.getElementById("textInput").value.trim();
        const loading = document.getElementById("loading");
        const resultContent = document.getElementById("resultContent");
        const convertBtn = document.getElementById("convertBtn");

        if (!text) {
          resultContent.innerHTML = `
            <div class="error-message">
              <i class="fas fa-exclamation-triangle"></i>
              Please enter some text.<br>
              გთხოვთ შეიყვანოთ ტექსტი.
            </div>
          `;
          return;
        }

        // Show loading state
        loading.classList.add("show");
        convertBtn.disabled = true;
        convertBtn.innerHTML =
          '<i class="fas fa-spinner fa-spin"></i> Processing...';
        resultContent.innerHTML = "";

        // Create payload based on current mode
        let payload;
        if (currentMode === "pinyin") {
          // For pinyin mode, we need to tell the backend it's pinyin
          // Check if it contains Chinese characters, if not, treat as pinyin
          const hasChinese = /[\u4e00-\u9fa5]/.test(text);
          if (hasChinese) {
            payload = { text: text };
          } else {
            // Force pinyin mode by creating a payload that the backend will recognize as pinyin
            payload = { text: text.toLowerCase() };
          }
        } else {
          // Chinese mode - send as is
          payload = { text: text };
        }

        fetch("convert", {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify(payload),
        })
          .then((response) => {
            if (!response.ok) {
              throw new Error(`HTTP error! status: ${response.status}`);
            }
            return response.json();
          })
          .then((data) => {
            loading.classList.remove("show");
            convertBtn.disabled = false;
            convertBtn.innerHTML =
              '<i class="fas fa-magic"></i> კონვერტაცია / Convert';

            let resultHtml = "";

            if (data.error) {
              resultHtml = `
                <div class="error-message">
                  <i class="fas fa-exclamation-triangle"></i>
                  ${data.error}
                </div>
              `;
            } else if (data.special) {
              const pinyinDisplay = `/${data.special.pinyin}/`;
              resultHtml = `
                <div class="result-item">
                  <div class="result-row">
                    <span class="result-label">Pinyin</span>
                    <span class="result-value">${pinyinDisplay}</span>
                  </div>
                  <div class="result-row">
                    <span class="result-label">ქართული</span>
                    <span class="result-value">${data.special.ქართული}</span>
                  </div>
                </div>
              `;
            } else {
              for (const [key, value] of Object.entries(data)) {
                if (
                  value &&
                  typeof value === "object" &&
                  value.pinyin &&
                  value.ქართული
                ) {
                  const pinyinDisplay = `/${value.pinyin}/`;
                  resultHtml += `
                    <div class="result-item">
                      <div class="result-row">
                        <span class="result-label">Pinyin</span>
                        <span class="result-value">${pinyinDisplay}</span>
                      </div>
                      <div class="result-row">
                        <span class="result-label">ქართული</span>
                        <span class="result-value">${value.ქართული}</span>
                      </div>
                    </div>
                  `;
                }
              }
            }

            if (!resultHtml) {
              resultHtml = `
                <div class="empty-state">
                  <div class="empty-icon">
                    <i class="fas fa-question-circle"></i>
                  </div>
                  No result generated. Please try again.
                </div>
              `;
            }

            resultContent.innerHTML = resultHtml;
          })
          .catch((error) => {
            console.error("Error:", error);
            loading.classList.remove("show");
            convertBtn.disabled = false;
            convertBtn.innerHTML =
              '<i class="fas fa-magic"></i> კონვერტაცია / Convert';

            resultContent.innerHTML = `
              <div class="error-message">
                <i class="fas fa-exclamation-triangle"></i>
                Connection error: ${error.message}
              </div>
            `;
          });
      }

      // Initialize the app
      window.addEventListener("load", () => {
        toggleMode("chinese"); // Start with Chinese mode
        document.getElementById("textInput").focus();
      });
    </script>
  </body>
</html>
